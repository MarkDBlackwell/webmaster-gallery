<%  action, method = @edit_fields ? %w[update put] : %w[show get] %><%= %>
<%= div_for picture do %>
<%=   form_for picture, :url => {:controller => 'admin_pictures',
          :action => action, :id => picture.id},
          :html => {:method => method} do |f| %>
<%=     submit_tag if @edit_fields %>
<%=     content_tag :div, :class => 'thumbnail' do -%>
<%        s = picture.filename
          extension = File.extname s %>
<%=       content_tag :a, :href => image_path(['gallery', s].join('/')) do -%>
<%=         image_tag ['gallery', s.chomp(extension) + '-t' + extension].
                join('/'), :alt => picture.title -%>
<%        end # anchor %>
<%      end # div.thumbnail %>
<%=     content_tag :div, :class => 'filename' do -%>
<%=       picture.filename %>
<%        if @show_labels
-%> &nbsp; (filename) <%
          end
        end if @show_filename %>
<%=     content_tag :div, :class => 'title' do -%>
<%=       if @edit_fields 
            f.text_field :title
          else
            picture.title
          end %>
<%       if @show_labels
-%> &nbsp; (title) <%
          end
        end %>
<%=     content_tag :div, :class => 'description' do -%>
<%=       if @edit_fields
            f.text_field :description
          else
            picture.description
          end %>
<%        if @show_labels
-%> &nbsp; (description) <%
          end
        end %>
<%=     content_tag :div, :class => 'year' do -%>
<%=       if @edit_fields
            f.text_field :year
          else
            picture.year
          end %>
<%        if @show_labels
-%> &nbsp; (year) <%
          end
        end %>
<%    end # form %>
<%=   content_tag :div, :class => 'edit' do -%>
<%=     button_to 'edit', {:controller => :admin_pictures, :action => :edit,
            :id => picture.id}, :method => :get -%>
<%    end if @editable -%>
<%  end # div.picture %>
